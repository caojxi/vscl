var Seed=function(){"use strict";function t(t,e,i,n){if("function"==typeof t)this._update=t;else for(var r in t)"update"===r?this._update=t[r]:this[r]=t[r];this.attr=e,this.arg=i,this.key=n;var s=e.value.match(h);s&&(this.filters=s.map(function(t){var e=t.replace("|","").trim().split(/\s+/),i=e[0];return{name:i,apply:l[i],args:e.length>1?e.slice(1):null}}))}function e(t,e){"string"==typeof t&&(t=document.getElementById(t)),this.el=t,this._bindings={},this.scope={};var i=t.querySelectorAll(r.selector);[].forEach.call(i,this._compileNode.bind(this)),this._compileNode(t);for(var n in this._bindings)this.scope[n]=e[n]}function i(t){return[].map.call(t,function(t){return{name:t.name,value:t.value}})}function n(){r.selector=Object.keys(c).map(function(t){return"["+r.prefix+"-"+t+"]"}).join()}var r={prefix:"sd",selector:null},s=Array.prototype,o=s.slice,a=["pop","push","shift","unshift","splice","sort"],u=function(t,e){a.forEach(function(i){t[i]=function(){s[i].apply(this,arguments),e({event:i,args:o.call(arguments),array:t})}})},c={text:function(t){this.el.textContent=t||""},show:function(t){this.el.style.display=t?"":"none"},class:function(t){this.el.classList[t?"add":"remove"](this.arg)},on:{update:function(t){var e=this.arg;this.handlers||(this.handlers={});var i=this.handlers;i[e]&&this.el.removeEventListener(e,i[e]),t&&(this.el.addEventListener(e,t),i[e]=t)},unbind:function(){var t=this.arg;this.handlers&&this.el.removeEventListener(t,this.handlers[t])}},each:{update:function(t){u(t,this.mutate.bind(this))},mutate:function(t){}}},l={capitalize:function(t){return(t=t.toString()).charAt(0).toUpperCase()+t.slice(1)},uppercase:function(t){return t.toUpperCase()},delegate:function(t,e){return function(i){e.every(function(t){return i.target.webkitMatchesSelector(t)})&&t.apply(this,arguments)}},repeat:function(){}},p=/^[^\|]+/,h=/\|[^\|]+/g;t.prototype.applyFilters=function(t){var e=t;return this.filters.forEach(function(t){t.apply&&(e=t.apply(e,t.args))}),e},t.prototype.update=function(t){this.filters&&(t=this.applyFilters(t)),this._update(t)};var f={parse:function(e){var i=r.prefix;if(-1===e.name.indexOf(i))return null;var n=e.name.slice(i.length+1),s=n.indexOf("-"),o=-1===s?null:n.slice(s+1),a=o?n.slice(0,s):n,u=c[a],l=e.value.match(p);return u&&l?new t(u,e,o,l[0].trim()):null}};return e.prototype._compileNode=function(t){var e=this;i(t.attributes).forEach(function(i){var n=f.parse(i);n&&e._bind(t,n)})},e.prototype._bind=function(t,e){e.el=t,t.removeAttribute(e.attr.name);var i=e.key,n=this._bindings[i]||this._createBinding(i);n.directives.push(e),e.bind&&e.bind(t,n.value)},e.prototype._createBinding=function(t){var e={value:void 0,directives:[]};return this._bindings[t]=e,Object.defineProperty(this.scope,t,{get:function(){return e.value},set:function(t){e.value=t,e.directives.forEach(function(e){e.update(t)})}}),e},e.prototype.dump=function(){var t={};for(var e in this._bindings)t[e]=this._bindings[e];return t},e.prototype.destroy=function(){for(var t in this._bindings)this._bindings[t].directives.forEach(function(t){t.definition.unbind&&t.definition.unbind(t.el,t.argument,t)});this.el.parentNode.removeChild(this.el)},e.config=r,n(),e.directive=function(t,e){c[t]=e,n()},e.filter=function(t,e){l[t]=e},e.extend=function(t){var i=function(){e.apply(this,arguments);for(var t in this.extensions){var i=this.extensions[i];this.scope[t]="function"==typeof i?i.bind(this):i}};(i.prototype=Object.create(e.prototype)).extensions={};for(var n in t)i.prototype.extensions[n]=t[n];return i},e}();